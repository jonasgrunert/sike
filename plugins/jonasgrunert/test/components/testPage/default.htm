{% set test = __SELF__.test %}
{% set points = test.questions|length %}
<h3>{{test.title}}<span class="right">{{points}} Points</span></h3>
<p>{{test.description | raw }}</p>
<div style="padding-bottom: 50px;">
	<form>
		{% for question in test.questions %}
		{% set count = 1 %}
		<div>
			<span style="padding-left: 5px;">{{count}}. &nbsp  {{question.question}}</span>
			<br>
			<span class="result" style="padding-left: 35px;">{{question.explanation}}<br></span>
				{% for i in 1..5 %}
					{% set id = random((question.answers|length)-1) %}
					{% set answer = question.answers[id] %}
					<div>
						<input type="checkbox" id="answer{{answer.id}}" name="answer{{answer.id}}">
						<label for="answer{{answer.id}}">{{answer.answer}}</label>
						{% if answer.result %}
							<i class="material-icons result green-text">done</i>
						{% else %}
							<i class="material-icons result red-text">clear</i>
						{% endif %}
						<span class="result"> &nbsp {{answer.comment}}</span>
					</div>
				{% endfor %}
			{% endfor %}
		</div>
		<button type="submit" class="btn waves-effect waves-light right"
			data-request="{{__SELF__}}::onSubmitTest"
			data-request-success="showResult(data)"
			data-request-update="testResult: '#result', testResult: '#resultmodal'">Submit</button>
	</form>
</div>
<div class="result" id="result">
	{% partial '@testResult' %}
</div>
<div class="modal" id="resultmodal">
	<div class="modal-content">
		{% partial '@testResult' %}
	</div>
</div>

<script>
	$(".result").hide();
	$(".modal").modal();
	function showResult(result){
		$(".result").show();
		$("#resultmodal").modal('open');
	}
</script>