title = "Blog Category"
url = "/blog/category/:category/:page"
layout = "default"
description = "Blog Category Page"
is_hidden = 1

[blogPosts]
pageNumber = "{{ :page }}"
categoryFilter = "{{ :category }}"
postsPerPage = 5
noPostsMessage = "No posts found"
sortOrder = "published_at desc"
categoryPage = "blog-category"
postPage = "post"

[ssbuttonsssb]
facebook = 1
twitter = 1
google+ = 1
tumblr = 1
pinterest = 1
pocket = 1
reddit = 1
linkedin = 1
wordpress = 0
pinboard = 1
email = 1
order_facebook = 1
order_twitter = 2
order_google+ = 3
order_tumblr = 4
order_pinterest = 5
order_pocket = 6
order_reddit = 7
order_linkedin = 8
order_wordpress = 9
order_pinboard = 10
order_email = 11
theme = "flat_web_icon_set_color"

[searchForm]
resultPage = "blog-search"
categoryFilter = 1

[contactForm]
injectBootstrapAssets = 0
injectMainScript = 1
==
{% set posts = blogPosts.posts %}
{% set category = this.param.category %}
{% partial 'BlogButton' heading="Category: "~category %}
{% for post in posts %}
    <div class='card hoverable'>
        <div class='card-image'>
            <img src='{{ post.featured_images[0].path }}'>
            <span class='card-title'><a href="{{ post.url }}" class='white-text'>{{ post.title }}</a></span>
        </div>        
            <div class="card-content" id="{{post.slug}}">
                {{ post.summary|raw }}
                <div id="{{post.slug~"text"}}" class="section" style="display: none;">
                       <div class="divider"></div>
                       <br>
                    {{ post.content_html|raw }}
                </div>
            </div>
        <div class='card-action'>
            {% if post.categories.count > 0 %}
                {% for category in post.categories %}
                    <a href="/blog/category/{{category.slug}}/1">
                        <div class='chip'>
                            {{ category.name }}
                        </div>
                    </a>
                {% endfor %}
            {% else %}
                <div class='chip'>
                    Sorry, but there is no category.
                </div>
            {% endif%}
            <span class='right'>{{ post.published_at|date('M d, Y') }}</span>
        </div>
    </div>
    <script>
        var trigger = "{{post.slug}}";
        {% set expand = post.slug~"text" %} 
        var expandjs = "{{expand}}";
        $("#"+trigger).click(function(){
            $("#"+expandjs).slideToggle();
        });
    </script>
{% else %}
    {{ noPostsMessage }}
{% endfor %}


{% if posts.lastPage > 1 %}
    <ul class="pagination right">
        {% if posts.currentPage > 1 %}
            <li><a href="{{ this.page.baseFileName|page({ (pageParam): (posts.currentPage-1) }) }}"><i class="material-icons">chevron_left</i></a></li>
        {% endif %}

        {% for page in 1..posts.lastPage %}
            <li class="{{ posts.currentPage == page ? 'active' : null }}">
                <a href="{{ this.page.baseFileName|page({ (pageParam): page }) }}">{{ page }}</a>
            </li>
        {% endfor %}

        {% if posts.lastPage > posts.currentPage %}
            <li><a href="{{ this.page.baseFileName|page({ (pageParam): (posts.currentPage+1) }) }}"><i class="material-icons">chevron_right</i></a></li>
        {% endif %}
    </ul>
{% endif %}